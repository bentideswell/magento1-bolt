<?php
/**
 *
 */
?>
<div id="bolt-cache" style="display: none;">
	<div class="bolt-shadow"></div>
	<div class="bolt-inner">
		<div class="content-header skip-header">
			<table cellspacing="0">
				<tbody>
					<tr>
						<td>
							<h3 style="line-height: 40px; "><?php echo $this->__('Bolt Full Page Cache v%s', $this->getModuleVersion()) ?></h3>
						</td>
						<td class="form-buttons">
							<a href="http://fishpig.co.uk/magento/extensions/full-page-cache/?utm_source=Fishpig_Bolt&utm_medium=Quick%20Launch" target="_blank">
								<img src="data:image/png;base64, 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" alt="View Bolt at FishPig.co.uk" style="max-height: 40px;"/>
							</a>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<ul class="tabs-horiz" id="bolt_tabs">
			<li>
				<a class="tab-item-link" href="#" id="bolt_tabs_quickrefresh">
					<span><?php echo $this->__('Quick Refresh') ?></span>
				</a>
			</li>
			<li>
				<a class="tab-item-link" href="<?php echo $this->getUrl('adminhtml/system_config/edit/section/bolt/') ?>">
					<span><?php echo $this->__('Configuration') ?></span>
				</a>
			</li>
			<li>
				<a class="tab-item-link" href="<?php echo $this->getUrl('adminhtml/cache') ?>">
					<span><?php echo $this->__('Cache Management') ?></span>
				</a>
			</li>
		</ul>
		<div id="bolt_tabs_content">
			<div id="bolt_tabs_quickrefresh_content">
				<form id="bolt-cache-form" method="post" action="<?php echo $this->getFormActionUrl() ?>">
					<div class="no-display">
						<input type="hidden" name="form_key" value="<?php echo Mage::getSingleton('core/session')->getFormKey(); ?>" />
						<?php if (Mage::app()->isSingleStoreMode()): ?>
							<input type="hidden" name="bolt[store_id][]" value="<?php echo $this->getDefaultStoreId() ?>" />
						<?php endif; ?>
					</div>
					<table class="form-list">
						<tbody>
							<tr>
								<td class="label">
									<label for="bolt_uri"><?php echo $this->__('URL') ?> <span class="required">*</span></label>
								</td>
								<td class="value">
									<input type="text" class="required-entry input-text" value="" name="bolt[uri]" id="bolt_uri" placeholder="<?php echo $this->__('eg. /mens/shoes/nike-air.html') ?>" />
								</td>
							</tr>
							<tr>
								<td class="label">
									<label for="bolt_subpages"><?php echo $this->__('Include Sub-Pages') ?> <span class="required">*</span></label>
								</td>
								<td class="value">
									<select name="bolt[subpages]" id="bolt_subpages" class="select required-entry">
										<?php if (false && $this->isMemcache()): ?>
											<option value="0"><?php echo $this->__(' No - not available with Memcache') ?></option>
										<?php else: ?>
											<option value="0"><?php echo $this->__('No') ?></option>
											<option value="1" selected="selected"><?php echo $this->__('Yes') ?></option>
										<?php endif; ?>
									</select>
								</td>
							</tr>
							<?php if (!Mage::app()->isSingleStoreMode()): ?>
								<tr>
									<td class="label">
										<label for="bolt_store"><?php echo $this->__('Store') ?> <span class="required">*</span></label>
									</td>
									<td class="value">
										<?php if ($websites = $this->getWebsites()): ?>
											<select name="bolt[store_id][]" id="bolt_store_id" multiple="multiple" class="select multiselect required-entry" size="<?php echo $this->getStoreElementSize() ?>">
												<?php foreach ($websites as $website): ?>
													<?php $showWebsite = false; ?>
													<?php foreach ($website->getGroups() as $group): ?>
														<?php $showGroup = false; ?>
															<?php foreach ($this->getStores($group) as $store): ?>
																<?php if ($showWebsite == false): ?>
																	<?php $showWebsite = true; ?>
																	<optgroup label="<?php echo $this->escapeHtml($website->getName()) ?>"></optgroup>
																<?php endif; ?>
																<?php if ($showGroup == false): ?>
																	<?php $showGroup = true; ?>
																	<optgroup label="&nbsp;&nbsp;&nbsp;<?php echo $this->escapeHtml($group->getName()) ?>">
																<?php endif; ?>
																<option value="<?php echo $this->escapeHtml($store->getId()) ?>"<?php if($this->getStoreId() == $store->getId()): ?> selected="selected"<?php endif; ?>>&nbsp;&nbsp;&nbsp;&nbsp;<?php echo $this->escapeHtml($store->getName()) ?></option>
															<?php endforeach; ?>
														<?php if ($showGroup): ?>
															</optgroup>
														<?php endif; ?>
													<?php endforeach; ?>
												<?php endforeach; ?>
											</select>
										<?php endif; ?>
									</td>
								</tr>
							<?php endif; ?>
							<tr>
								<td class="label">&nbsp;</td>
								<td class="value">
									<button type="submit" class="button submit save"><span><?php echo $this->__('Refresh') ?></span></button>
									<span>&nbsp; &nbsp;</span> <a href="#close" class="bolt-close"><?php echo $this->__('Close') ?></a>
								</td>
							</tr>
						</tbody>
					</table>
				</form>
			</div>
		</div>
		<?php echo Mage::helper('bolt/license')->getImageJs('bolt.png', 'a.bolt') ?>
	</div>
</div>
<style>
#bolt-cache { position: absolute; top: 0; left: 0; z-index: 300; width: 100%; height: 100%; }
#bolt-cache .bolt-shadow { position: fixed; top: 0; left: 0; z-index: 301; width: 100%; height: 100%; background: #000; }
#bolt-cache .bolt-inner { background: #fff; position: relative; z-index: 302; max-width: 500px; border: 4px solid #ccc; margin: 2% auto 0; padding: 10px 20px; }
</style>
<script type="text/javascript">
//<![CDATA[
	(function() {
		var _launcher = new Element('a', {href: 'bolt', class: 'bolt'}).update('Bolt');
		var _target = $$('.header-right p.super')
		var _wrapper = $('bolt-cache');
		var _shadow = _wrapper.select('.bolt-shadow').first();
		var _inner = _wrapper.select('.bolt-inner').first();
		var _form = new varienForm('bolt-cache-form');
		
		if (_target) {
			_target.first()
				.insert({top: new Element('span', {class: 'separator'}).update('|')})
				.insert({top: _launcher});
		}

		var _bolt_close = function(event) {
			if (event) {
				Event.stop(event);
			}
			
			$('bolt-cache').hide();
		}
		
		var _bolt_open = function(event) {
			if (event) {
				Event.stop(event);
			}

			_shadow.hide();
			_inner.hide();
			_wrapper.show();
			
			Effect.Appear(_shadow, {
				to: 0.75,
				duration: 0.2,
				afterFinish: function() {
					Effect.Appear(_inner, {to: 1, duration: 0.3});
				}
			});
		}
		
		Event.observe(_launcher, 'click', _bolt_open.bindAsEventListener(this));
		$$('.bolt-close,.bolt-shadow').invoke('observe', 'click', _bolt_close.bindAsEventListener(this));

		new varienTabs('bolt_tabs', 'bolt_tabs_content', 'bolt_tabs_quickrefresh', []);
	})();
//]>
</script>